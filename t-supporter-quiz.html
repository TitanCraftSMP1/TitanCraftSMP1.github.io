<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-Supporter zu Supporter Quiz - TitanCraft SMP</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>T-Supporter zu Supporter Quiz</h1>
    </header>
    <main>
        <?php
        // Prüfen, ob das Formular abgesendet wurde
        if ($_SERVER["REQUEST_METHOD"] == "POST") {
            // Überprüfen der Quiz-Antworten
            $answers = [
                'question1' => 'A',
                'question2' => 'C',
                'question3' => 'B',
                'question4' => 'B'
            ];

            $score = 0;
            $userAnswers = [];

            // Prüfen der Antworten
            foreach ($answers as $question => $correctAnswer) {
                if (isset($_POST[$question])) {
                    $userAnswer = $_POST[$question];
                    $userAnswers[$question] = $userAnswer;

                    if ($userAnswer == $correctAnswer) {
                        $score++;
                    }
                }
            }

            $MAX_ATTEMPTS = 3; // Maximale Anzahl an Fehlversuchen
            $BASE_WAIT_TIME = 3600; // 1 Stunde in Sekunden
            $additionalTime = ($MAX_ATTEMPTS - $score) * 300; // Zusätzliche 5 Minuten pro Fehlversuch in Sekunden

            if ($score == 4) {
                // Quiz bestanden
                echo '<p>Glückwunsch! Du hast das Quiz bestanden.</p>';
                // Hier können Sie den Code für den E-Mail-Versand einfügen
            } else {
                // Quiz nicht bestanden, Wartezeit berechnen
                $waitTime = $BASE_WAIT_TIME + $additionalTime;
                echo '<p>Leider hast du das Quiz nicht bestanden. Bitte warte, bevor du es erneut versuchst.</p>';
                echo '<p>Wartezeit: ' . gmdate("H:i:s", $waitTime) . '</p>';
            }
        }
        ?>

        <form method="post">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="question">
                <p>1. Was würdest du tun, wenn jemand im MC Chat beleidigt?</p>
                <label><input type="radio" name="question1" value="A" required> A: Muten</label><br>
                <label><input type="radio" name="question1" value="B"> B: Verwarnen</label><br>
                <label><input type="radio" name="question1" value="C"> C: Bannen</label>
            </div>
            <div class="question">
                <p>2. Was machst du, wenn jemand hackt?</p>
                <label><input type="radio" name="question2" value="A" required> A: Verwarnen</label><br>
                <label><input type="radio" name="question2" value="B"> B: Bannen</label><br>
                <label><input type="radio" name="question2" value="C"> C: Bannen und den Inhaber melden</label>
            </div>
            <div class="question">
                <p>3. Was machst du bei einer Bewerbung?</p>
                <label><input type="radio" name="question3" value="A" required> A: Nichts</label><br>
                <label><input type="radio" name="question3" value="B"> B: Inhaber Bescheid geben</label><br>
                <label><input type="radio" name="question3" value="C"> C: Ein Moderator anpingen</label>
            </div>
            <div class="question">
                <p>4. Was machst du bei Spammen?</p>
                <label><input type="radio" name="question4" value="A" required> A: Inhaber Bescheid geben</label><br>
                <label><input type="radio" name="question4" value="B"> B: Muten</label><br>
                <label><input type="radio" name="question4" value="C"> C: Kicken</label>
            </div>
            <button type="submit">Quiz abschließen</button>
        </form>
    </main>
</body>
</html>
